	<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.15" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>

  <title> Fluent Python Reading Notes &middot; Pythonic🐶 </title>

  
  <link rel="stylesheet" href="http://danigong.github.io/css/poole.css">
  <link rel="stylesheet" href="http://danigong.github.io/css/syntax.css">
  <link rel="stylesheet" href="http://danigong.github.io/css/hyde.css">
  <link rel="stylesheet" href="http://danigong.github.io/css/style.css"> 
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Pythonic🐶" />
</head>

	<body class="">
		<div class="sidebar">

  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://danigong.github.io/"><h1>Pythonic🐶</h1></a>
      <p class="lead">
       Life is short, I need python 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
        <li><a href="/about/"> About </a></li>
      
    </ul>
    <div class="social-font clearfix">
      GS's&nbsp;
    
    <a href="http://weibo.com/iamastupidboy" target="_blank" title="weibo">Weibo</a>
    
    
    
    <a href="https://github.com/DaniGong" target="_blank" title="github">Github</a>
    
    
    
  </div>
 <p>&copy; 2018. All rights reserved. </p>
  
</div>
  
</div>


		<div class="content container">
			<div class="post" style="word-wrap: break-word;">
			 	<h1>Fluent Python Reading Notes</h1>
			  <span class="post-date">Mon, Mar 12, 2018</span>
			      

<h3 id="1:c44d5f57678f01c760738e3a6271e3a0">1</h3>

<blockquote>
<ul>
<li><code>dict()</code> is slower than <code>{}</code></li>
<li><code>list()</code> is slower than <code>()</code></li>
</ul>
</blockquote>

<ul>
<li>[x] 需要符号查找（不能预先知道<code>list()</code>有没有被重定义）</li>
<li>[x] 方法调用</li>
<li>[x] 要检查有没有可迭代变量传入</li>
</ul>

<h3 id="2:c44d5f57678f01c760738e3a6271e3a0">2</h3>

<p><strong>特殊方法</strong></p>

<blockquote>
<ul>
<li><code>__len__()</code></li>
<li><code>__getitem__()</code></li>
<li><code>__setitem__()</code></li>
<li><code>__iter__()</code></li>
</ul>
</blockquote>

<p>是为了被<code>python解释器</code>调用的，自己不用调用它们，所以没有<code>A.__len__()</code>方法，只有<code>len(A)</code></p>

<h3 id="3:c44d5f57678f01c760738e3a6271e3a0">3</h3>

<p>自定义布尔值 -&gt; 实现<code>__bool__</code></p>

<h3 id="4:c44d5f57678f01c760738e3a6271e3a0">4</h3>

<blockquote>
<ul>
<li><code>__str__()</code> : readable, 面向用户</li>
<li><code>__repr__()</code> : unambigous, 面向DEV</li>
</ul>
</blockquote>

<h3 id="5:c44d5f57678f01c760738e3a6271e3a0">5</h3>

<p><em>The Zen of Python</em></p>

<ul>
<li>1. 实用胜于纯粹</li>
<li>2. 不能让特例特殊到开始破坏规则</li>
</ul>

<h3 id="6:c44d5f57678f01c760738e3a6271e3a0">6</h3>

<p><strong>内置序列类型</strong></p>

<blockquote>
<ul>
<li>容器序列：任意类型，引用 - <code>list, tuple, deque</code></li>

<li><p>扁平序列：单一类型，值 － <code>str(3.0), byte(3.0), bytearray, memoryview</code></p></li>

<li><p>可变序列(MutableSequence)：<code>list, deque</code> &hellip;</p></li>

<li><p>不可变序列(Sequence)：<code>tuple, str, byte</code></p></li>
</ul>
</blockquote>

<h3 id="7:c44d5f57678f01c760738e3a6271e3a0">7</h3>

<blockquote>
<ul>
<li>list comprehension = listcomps 列表推导</li>
<li>generator expression = genexps 生成器表达式</li>
</ul>
</blockquote>

<h3 id="8:c44d5f57678f01c760738e3a6271e3a0">8</h3>

<blockquote>
<ul>
<li><code>chr(65)</code> -&gt; A</li>
<li><code>ord(A)</code> -&gt; 65</li>
<li><code>unichr(12345)</code> -&gt; u&rsquo;\u3039&rsquo;</li>
</ul>
</blockquote>

<h3 id="9:c44d5f57678f01c760738e3a6271e3a0">9</h3>

<p><strong>列表推导的作用只有一个：</strong> 生成列表</p>

<h3 id="10:c44d5f57678f01c760738e3a6271e3a0">10</h3>

<p><strong><code>genexps</code>优于<code>listcomps</code></strong></p>

<p><code>genexps</code>遵守了迭代器协议，可以逐个产生元素，而不是先建立一个完整的列表，避免了额外的内存占用</p>

<h3 id="11:c44d5f57678f01c760738e3a6271e3a0">11</h3>

<p><strong>元组拆包</strong></p>

<blockquote>
<ul>
<li><code>a,b = (a,b)</code></li>
<li><code>a,b = b,a</code> 两个变量值交换</li>
</ul>
</blockquote>

<h3 id="12:c44d5f57678f01c760738e3a6271e3a0">12</h3>

<p><strong><code>*</code>来处理剩下的元素</strong></p>

<p>Python3: <strong>平行赋值</strong>: <code>a,b,*rest = range(5)</code> -&gt; <code>(0,1,[2,3,4])</code></p>

<h3 id="13:c44d5f57678f01c760738e3a6271e3a0">13</h3>

<p><code>namedtuple</code>和<code>tuple</code>创建实例消耗内存一样，因为字段名都存在类里：</p>

<blockquote>
<ul>
<li><code>_fileds</code>类属性</li>
<li><code>_make(iterable)</code>类方法</li>
<li><code>_asdict()</code>实例方法</li>
</ul>
</blockquote>

<h3 id="14:c44d5f57678f01c760738e3a6271e3a0">14</h3>

<p><code>tuple</code>没有<code>__reversed__</code>方法，但可以<code>reversed(my_tuple)</code></p>

<h3 id="15:c44d5f57678f01c760738e3a6271e3a0">15</h3>

<p><strong>切片赋值</strong>：改变<code>list</code>中连续多个值</p>

<pre><code>    l = list(range(10))
    l[2:5] = [20,30]
</code></pre>

<p>-&gt; <code>l:[0,1,20,30,5,6,7,8,9]</code></p>

<h3 id="16:c44d5f57678f01c760738e3a6271e3a0">16</h3>

<p><code>__iadd__</code>方法：就地加法</p>

<blockquote>
<ul>
<li><code>+</code> = <code>__iadd__</code></li>
<li><code>*</code> = <code>__imul__</code></li>
</ul>
</blockquote>

<h3 id="17:c44d5f57678f01c760738e3a6271e3a0">17</h3>

<p><strong><code>id(object)</code> -&gt; return &ldquo;Identity(内存地址)&rdquo; of an object</strong></p>

<blockquote>
<ul>
<li><code>+=</code> or <code>*=</code> 用在<code>list</code>上，不改变id</li>
<li><code>+=</code> or <code>*=</code> 用在<code>tuple</code>上，改变id，重新创建一个obj</li>
</ul>
</blockquote>

<h3 id="18:c44d5f57678f01c760738e3a6271e3a0">18</h3>

<p><strong>如果一个方法对对象进行的是就地改动，那就应该返回<code>None</code></strong></p>

<h3 id="19:c44d5f57678f01c760738e3a6271e3a0">19</h3>

<ul>
<li><code>list.sort</code> -&gt; 就地改</li>
<li><code>sorted()</code> -&gt; 新建一个列表返回</li>
</ul>

<p>Example:
<code>sorted(fruits, key=len)</code>
<code>sorted(fruits, key=lower)</code> &hellip;</p>

<h3 id="20:c44d5f57678f01c760738e3a6271e3a0">20</h3>

<p><strong><code>bisect</code> 二分查找</strong></p>

<blockquote>
<ul>
<li>1. <code>bisect(haystack, needle)</code></li>
<li>2. <code>insort(seq, item)</code> -&gt; 插入后仍保持升序</li>
</ul>
</blockquote>

<h3 id="21:c44d5f57678f01c760738e3a6271e3a0">21</h3>

<p><strong>字符串格式化</strong></p>

<p><code>' '.format(a,b,c)</code></p>

<blockquote>
<ul>
<li><code>{0}</code> -&gt; 位置参数</li>
<li><code>{name}</code> -&gt; 关键字参数</li>
<li><code>{0[0]}</code> -&gt; 对<code>list</code>使用索引</li>
<li><code>{0:*(填充字符)&gt;(右对齐)10(宽度)}</code> -&gt; 填充与格式化</li>
</ul>
</blockquote>

<h3 id="22:c44d5f57678f01c760738e3a6271e3a0">22</h3>

<p><code>array</code> 场景-&gt;1000万个浮点数
<code>deque</code> 场景-&gt;需要频繁对序列进行<code>FIFO</code></p>

<h3 id="23:c44d5f57678f01c760738e3a6271e3a0">23</h3>

<p><strong><code>memoryview</code></strong></p>

<h3 id="24:c44d5f57678f01c760738e3a6271e3a0">24</h3>

<p><strong><code>numpy, scipy</code></strong></p>

<h3 id="25:c44d5f57678f01c760738e3a6271e3a0">25</h3>

<p><strong><code>collections.deque</code></strong>：线程安全、快速从两端添加、删除元素。</p>

<p>*场景*：存放最近使用的几个元素</p>

<blockquote>
<ul>
<li>1. <code>rotate(3)</code>：右边三个到左边。<code>rotate(-4)</code>：左边四个到右边。</li>
<li>2. <code>appendleft()</code>：单个。<code>extend, extendleft</code>： 队列。</li>
</ul>
</blockquote>

<h3 id="26:c44d5f57678f01c760738e3a6271e3a0">26</h3>

<ul>
<li><strong><code>散列表</code></strong>是<code>字典</code>类型性能出众的根本原因。</li>
<li><strong><code>collections.abc.Mapping</code>的instance</strong></li>
<li><strong>原子不可变数据类型</strong>（<code>str, byte</code>和数值类型）</li>
<li><strong>散列值</strong>就是<code>id()</code>函数的返回值</li>
</ul>

<h3 id="27:c44d5f57678f01c760738e3a6271e3a0">27</h3>

<p><strong>字典创建方法</strong></p>

<blockquote>
<ul>
<li>1. <code>a = dict(one=1,two=2,three=3)</code></li>
<li>2. <code>b = {'one':1,'two':2,'three':3}</code></li>
<li>3. <code>c = dict(zip(['one','two','three'],[1,2,3]))</code></li>
<li>4. 字典推导 <code>dictcomp</code></li>
</ul>
</blockquote>

<h3 id="28:c44d5f57678f01c760738e3a6271e3a0">28</h3>

<p><strong><code>dict.setdefault</code></strong>处理不存在于<code>dict</code>中的<code>key</code></p>

<h3 id="29:c44d5f57678f01c760738e3a6271e3a0">29</h3>

<p><strong><code>collections.defaultdict</code></strong>是处理找不到<code>key</code>的一个选择</p>

<p><code>dd = defautdict(list)</code>，如果<code>'new-key'</code>不存在，<code>dd['new-key']</code>会执行：</p>

<blockquote>
<ul>
<li>1. <code>list()</code>建新列表</li>
<li>2. 这个新列表作为<code>值</code>，<code>new-key</code>为<code>key</code>，放入<code>dd</code></li>
<li>3. 返回这个列表的引用</li>
</ul>
</blockquote>

<h3 id="30:c44d5f57678f01c760738e3a6271e3a0">30</h3>

<p><strong><code>__missing__</code>只会被<code>__getitem__</code>调用</strong></p>

<h3 id="31:c44d5f57678f01c760738e3a6271e3a0">31</h3>

<p><strong>如果要自定义一个映射类型，应该继承<code>collections.UserDict</code></strong></p>

<h3 id="32:c44d5f57678f01c760738e3a6271e3a0">32</h3>

<p><strong>字典的变种</strong></p>

<blockquote>
<ul>
<li>1. <code>collections.OrderedDict</code>: <code>popitem</code>方法 -&gt; 删除并返回</li>
<li>2. <code>collections.ChainMap</code>: 多个字典逐个查找</li>
<li>3. <code>collections.Counter</code>:</li>
</ul>

<blockquote>
<pre><code>    ct = Counter('abracadabra')
</code></pre>

<ul>
<li>-&gt;</li>
</ul>

<pre><code>    Counter({'a':5,'b':2,'r':2,'c':1,'d':1})
</code></pre>
</blockquote>

<ul>
<li>4. <code>UserDict</code>用户涌来继承写子类</li>
<li>5. <code>TransformDict</code></li>
</ul>
</blockquote>

<h3 id="33:c44d5f57678f01c760738e3a6271e3a0">33</h3>

<p><strong>不可变映射类型</strong></p>

<ul>
<li><code>types.MappingProxyType</code>：<code>只读的映射视图</code></li>
</ul>

			</div>

			
		</div>
		
  </body>
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-115398530-1', 'auto');
  ga('send', 'pageview');
  $('#messagesbsb').remove();
</script>



  </html>

